<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Add Roles</title>
        <meta charset="UTF-8">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script>
            var tok;
            function getUsersInProject(){
                $.ajax({
                    type: 'POST',
                    url: '/plm/rest/projectmanage/p/1/users',
                    contentType: 'application/json; charset=UTF-8',
                    accepts: {
                    	text: 'application/json'
                    },
                    dataType: 'json',
                    data: JSON.stringify({
                        token: tok
                    }),
                    success: function(data){
			// A list of users is returned
			for(x in data.users){
				$("div#projList").append("<h1>"+data.users[x].id+", "+data.users[x].name+"</h1>");
                        }
                    },
                    error: function(data){
			alert("error");
                    }
		});
            }
            
            function setRole(info){
			$.ajax({
				type: 'POST',
				url: '/plm/rest/rolemanage/p/1/u/1/r/1',
				contentType: 'application/json; charset=UTF-8',
				accepts: {
					text: 'application/json'
				},
				dataType: 'json',
				data: JSON.stringify({
                                    token: tok,
                                    userid: info.uid.value,
                                    roleid: info.rid.value
				}),
				success: function(data){
					// Information about the user's new role is returned
                                        $("div#updateMessage").append("<h1>" + data.users.id + " is now a " + data.users.role + "</h1>")
				},
				error: function(data){
					alert("error");
				}
			});
		}
        </script>
        
    </head>
    <body>
	Users In Project:
	<div id="projList"></div>
        <form name="Add Role">
            User ID:<input type="text" name="uid">
            Role:<select name="rid">
                    <option value="1">Stakeholder</option>
                    <option value="2">Project Leader</option>
                    <option value="3">Business Anaylst</option>
                    <option value="4">Quality Assurance</option>
                    <option value="5">Developer</option>
                    <option value="6">Release Manager</option>
                 </select>
            <input type="button" onclick="update(this.form);" value="Update Role"/>
        </form>
        <div id="updateMessage"></div>
        <script>
            function update(info)
            {
                setRole(info);
            }
        </script>
    </body>
</html>
